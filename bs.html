<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black-Scholes Derivation - Two Fundamental Principles</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => {
                        console.log('MathJax initial typesetting complete');
                    });
                }
            }
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: white;
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #007acc, #0056b3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        /* Two Principles Highlight Box */
        .principles-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .principles-box h2 {
            color: white;
            text-align: center;
            margin-bottom: 25px;
            font-size: 2em;
        }
        
        .principle {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid #ffd700;
        }
        
        .principle h3 {
            color: #ffd700;
            margin-top: 0;
            font-size: 1.4em;
        }
        
        .principle-highlight {
            background: rgba(255, 215, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ffd700;
        }
        
        .step {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #007acc;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .step-number {
            background: #007acc;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            float: left;
            margin-right: 20px;
            margin-top: -5px;
        }
        
        .step h3 {
            color: #007acc;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .math-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px solid #007acc;
        }
        
        .highlight {
            background: rgba(0, 122, 204, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            color: #007acc;
            font-weight: bold;
        }
        
        .final-result {
            background: linear-gradient(45deg, #007acc, #0056b3);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(0, 122, 204, 0.3);
        }
        
        .explanation {
            background: #e8f4f8;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid #007acc;
        }
        
        .principle-1-highlight {
            background: rgba(255, 107, 107, 0.15);
            border-left: 4px solid #ff6b6b;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .principle-2-highlight {
            background: rgba(78, 205, 196, 0.15);
            border-left: 4px solid #4ecdc4;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .mjx-math {
            font-size: 1.1em !important;
        }
        
        ul {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .connection-badge {
            display: inline-block;
            background: #ffd700;
            color: #333;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Black-Scholes Derivation</h1>
        <p class="subtitle">Understanding Through the Two Fundamental Principles</p>
        
        <!-- TWO FUNDAMENTAL PRINCIPLES BOX -->
        <div class="principles-box">
            <h2>üéØ The Two Fundamental Principles</h2>
            
            <div class="principle">
                <h3>Principle 1: Construct a Riskless Portfolio</h3>
                <p><strong>Value must be agnostic to outcome</strong></p>
                <ul>
                    <li>Hold Œî = ‚àÇC/‚àÇS shares of stock</li>
                    <li>Short 1 option</li>
                    <li>This eliminates all randomness!</li>
                </ul>
                <div class="principle-highlight">
                    <strong>In the math:</strong> The random term œÉS(‚àÇC/‚àÇS)dW<sub>t</sub> gets cancelled out when we hold the right number of shares.
                </div>
            </div>
            
            <div class="principle">
                <h3>Principle 2: Riskless Investments Earn Risk-Free Rate</h3>
                <p><strong>No arbitrage condition</strong></p>
                <ul>
                    <li>Since the portfolio is riskless, it must earn rate r</li>
                    <li>Otherwise, arbitrage exists!</li>
                </ul>
                <div class="principle-highlight">
                    <strong>In the math:</strong> The drift term must equal rC (enforced by the martingale property).
                </div>
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">1</div>
            <h3>Start: Option Price Function</h3>
            <p>We begin with the option price as a function of time and stock price:</p>
            <div class="math-box">
                $$C = C(t, S_t)$$
            </div>
            <p>Where:</p>
            <ul>
                <li><strong>C</strong> = option price</li>
                <li><strong>t</strong> = time</li>
                <li><strong>S_t</strong> = stock price at time t</li>
            </ul>
        </div>
        
        <div class="step">
            <div class="step-number">2</div>
            <h3>Find dC Using It√¥'s Lemma</h3>
            <p>Since $S_t$ is stochastic, we use It√¥'s lemma to find $dC$:</p>
            <div class="math-box">
                $$dC = \frac{\partial C}{\partial t}dt + \frac{\partial C}{\partial S}dS_t + \frac{1}{2}\frac{\partial^2 C}{\partial S^2}(dS_t)^2$$
            </div>
            <div class="explanation">
                <strong>Key insight:</strong> The extra $(dS_t)^2$ term appears because we're dealing with stochastic processes. In regular calculus, $(dx)^2 = 0$, but in stochastic calculus, $(dW_t)^2 = dt$!
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">3</div>
            <h3>Model Stock Price Dynamics (dS)</h3>
            <span class="connection-badge">üéØ PRINCIPLE 2 APPEARS HERE</span>
            <p>Under the <strong>risk-neutral measure</strong>, stock prices follow:</p>
            <div class="math-box">
                $$dS_t = rS_t dt + \sigma S_t dW_t$$
            </div>
            
            <div class="principle-2-highlight">
                <strong>‚ö° Principle 2 Connection:</strong> Notice the expected return is <strong>r</strong> (the risk-free rate), not some higher rate Œº! This is risk-neutral valuation in action - we're already assuming riskless investments earn the risk-free rate.
            </div>
            
            <p>Where:</p>
            <ul>
                <li><strong>r</strong> = risk-free interest rate (not Œº!)</li>
                <li><strong>œÉ</strong> = volatility</li>
                <li><strong>dW_t</strong> = Brownian motion increment (the random part)</li>
            </ul>
            
            <p>And importantly: <span class="highlight">$(dS_t)^2 = \sigma^2 S_t^2 dt$</span></p>
            
            <div class="explanation">
                <strong>Critical Assumption:</strong> We're treating œÉ as a <strong>constant</strong>! If volatility were stochastic (i.e., œÉ = œÉ(t, S_t)), we'd need to include dœÉ terms, which opens a whole Pandora's box of complexity. This constant volatility assumption is one of the key limitations of the basic Black-Scholes model.
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">4</div>
            <h3>Substitute dS into dC</h3>
            <p>Now we substitute our stock dynamics into the $dC$ expression:</p>
            <div class="math-box">
                $$dC = \frac{\partial C}{\partial t}dt + \frac{\partial C}{\partial S}(rS_t dt + \sigma S_t dW_t) + \frac{1}{2}\frac{\partial^2 C}{\partial S^2}(\sigma^2 S_t^2 dt)$$
            </div>
            
            <p>Collecting terms:</p>
            <div class="math-box">
                $$dC = \left(\frac{\partial C}{\partial t} + rS_t\frac{\partial C}{\partial S} + \frac{1}{2}\sigma^2 S_t^2\frac{\partial^2 C}{\partial S^2}\right)dt + \sigma S_t\frac{\partial C}{\partial S}dW_t$$
            </div>
            
            <div class="math-box" style="background: #fff3cd; border-color: #ff6b6b;">
                $$dC = \underbrace{\left(\text{drift terms}\right)dt}_{\text{Deterministic part}} + \underbrace{\sigma S_t\frac{\partial C}{\partial S}dW_t}_{\text{Random part - this is what we eliminate!}}$$
            </div>
            
            <div class="principle-1-highlight">
                <strong>‚ö° Principle 1 Connection:</strong> See that random term $\sigma S_t\frac{\partial C}{\partial S}dW_t$? This is the uncertainty in the option value. By holding exactly <strong>Œî = ‚àÇC/‚àÇS shares</strong> of stock, we can eliminate this randomness and create a riskless portfolio!
                <br><br>
                <strong>How?</strong> The stock also has a random component: $\sigma S_t dW_t$. When we hold ‚àÇC/‚àÇS shares, the random movements in the stock perfectly offset the random movements in the option!
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">5</div>
            <h3>Apply Martingale Property</h3>
            <span class="connection-badge">üéØ BOTH PRINCIPLES UNITE HERE</span>
            
            <p>Under the risk-neutral measure, the discounted option price $e^{-rt}C(t,S_t)$ must be a <strong>martingale</strong>.</p>
            
            <div class="explanation">
                <strong>What this means:</strong> The expected return on the option must equal the risk-free rate. This eliminates arbitrage opportunities!
            </div>
            
            <div class="principle-2-highlight">
                <strong>‚ö° Principle 2 Connection:</strong> This is where we enforce that the riskless portfolio must earn the risk-free rate! The martingale property is the mathematical way of saying "no arbitrage."
            </div>
            
            <p>For a martingale, the drift term (after discounting) must equal zero. This gives us:</p>
            <div class="math-box">
                $$\frac{\partial C}{\partial t} + rS_t\frac{\partial C}{\partial S} + \frac{1}{2}\sigma^2 S_t^2\frac{\partial^2 C}{\partial S^2} - rC = 0$$
            </div>
            
            <p>Rearranging:</p>
            <div class="math-box">
                $$\frac{\partial C}{\partial t} + rS_t\frac{\partial C}{\partial S} + \frac{1}{2}\sigma^2 S_t^2\frac{\partial^2 C}{\partial S^2} = rC$$
            </div>
            
            <div class="principle-2-highlight">
                <strong>See it?</strong> The right side is <strong>rC</strong> - the option earning the risk-free rate! This is Principle 2 enforced mathematically.
            </div>
        </div>
        
        <div class="final-result">
            <h3>üéâ THE BLACK-SCHOLES PDE! üéâ</h3>
            <div class="math-box" style="background: rgba(0,0,0,0.2); border-color: #1e3c72;">
                $$\frac{\partial C}{\partial t} + rS\frac{\partial C}{\partial S} + \frac{1}{2}\sigma^2 S^2\frac{\partial^2 C}{\partial S^2} = rC$$
            </div>
            <p style="margin-top: 20px;">This is the famous Black-Scholes partial differential equation!</p>
            
            <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin-top: 20px;">
                <h4 style="margin-top: 0;">How the Two Principles Appear:</h4>
                <p><strong>Principle 1 (Riskless Portfolio):</strong> By holding Œî = ‚àÇC/‚àÇS shares, we eliminated the random dW<sub>t</sub> term</p>
                <p><strong>Principle 2 (Earns Risk-Free Rate):</strong> The equation states the drift = rC, meaning the portfolio earns rate r</p>
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">6</div>
            <h3>Set Up Terminal & Boundary Conditions</h3>
            <p>Now we need to solve this PDE! We know the option value at expiry and the boundaries:</p>
            
            <div class="explanation">
                <strong>For a European Call Option:</strong>
                <ul>
                    <li><strong>At expiry (t = T):</strong> $C(T, S) = \max(S - K, 0)$ - the "hockey stick" payoff</li>
                    <li><strong>At S = 0:</strong> $C(t, 0) = 0$ - worthless if stock is worthless</li>
                    <li><strong>At S ‚Üí ‚àû:</strong> $C(t, S) \approx S - Ke^{-r(T-t)}$ - behaves like stock minus discounted strike</li>
                </ul>
            </div>
            
            <div class="explanation">
                <strong>For a European Put Option:</strong>
                <ul>
                    <li><strong>At expiry (t = T):</strong> $P(T, S) = \max(K - S, 0)$</li>
                    <li><strong>At S = 0:</strong> $P(t, 0) = Ke^{-r(T-t)}$ - maximum value when stock worthless</li>
                    <li><strong>At S ‚Üí ‚àû:</strong> $P(t, S) = 0$ - worthless when stock very expensive</li>
                </ul>
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">7</div>
            <h3>The Mathematical Magic: Analytical Solution</h3>
            <p>Here's where Black, Scholes, and Merton performed mathematical wizardry. Using transform methods and the special structure of the PDE, they found an exact solution!</p>
            
            <div class="math-box">
                <strong>European Call Option:</strong><br>
                $$C = S_0 N(d_1) - Ke^{-rT}N(d_2)$$
            </div>
            
            <div class="math-box">
                <strong>European Put Option:</strong><br>
                $$P = Ke^{-rT}N(-d_2) - S_0 N(-d_1)$$
            </div>
            
            <p><strong>Where:</strong></p>
            <div class="math-box">
                $$d_1 = \frac{\ln(S_0/K) + (r + \sigma^2/2)T}{\sigma\sqrt{T}}$$
                $$d_2 = d_1 - \sigma\sqrt{T}$$
            </div>
            
            <p>And $N(\cdot)$ is the cumulative standard normal distribution function.</p>
            
            <div class="explanation">
                <strong>Connection to Binomial:</strong> Remember from Chapter 13 appendix? As you increase the number of steps in a binomial tree to infinity, you get these exact formulas! Same principles, different mathematical framework.
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">üìä</div>
            <h3>Binomial Trees vs. Black-Scholes: Same Principles!</h3>
            
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <thead>
                    <tr style="background: #007acc; color: white;">
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">Aspect</th>
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">Binomial Trees</th>
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">Black-Scholes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>Time</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Discrete steps</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Continuous</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>Principle 1</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Hold Œî shares to make portfolio value same in up/down</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Hold Œî = ‚àÇC/‚àÇS shares to eliminate dW<sub>t</sub> term</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>Principle 2</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Portfolio earns e<sup>rŒît</sup></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Drift = rC (martingale property)</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>Probabilities</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">p = (e<sup>rŒît</sup> - d)/(u - d)</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Risk-neutral measure (Q-measure)</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd;"><strong>Result</strong></td>
                        <td style="padding: 12px; border: 1px solid #ddd;">f = e<sup>-rŒît</sup>[pf<sub>u</sub> + (1-p)f<sub>d</sub>]</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">C = S‚ÇÄN(d‚ÇÅ) - Ke<sup>-rT</sup>N(d‚ÇÇ)</td>
                    </tr>
                    <tr style="background: #fffacd;">
                        <td colspan="3" style="padding: 12px; border: 1px solid #ddd; text-align: center;">
                            <strong>As n ‚Üí ‚àû in binomial trees, you get Black-Scholes!</strong>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="step">
            <div class="step-number">üöÄ</div>
            <h3>The Revolutionary Impact</h3>
            <p><strong>This changed everything!</strong></p>
            
            <div class="explanation">
                <strong>Before Black-Scholes:</strong> "How much is this option worth?" ‚Üí Educated guesswork and intuition
            </div>
            
            <div class="explanation">
                <strong>After Black-Scholes:</strong> "How much is this option worth?" ‚Üí Plug numbers into formula, get exact answer!
            </div>
            
            <p><strong>Why it was revolutionary:</strong></p>
            <ul>
                <li><strong>Accessibility:</strong> Any trader could use it - no need to solve PDEs!</li>
                <li><strong>Standardization:</strong> Markets could agree on "fair value"</li>
                <li><strong>Foundation:</strong> Launched quantitative finance as a field</li>
                <li><strong>Same principles as binomial:</strong> Just expressed in continuous time!</li>
            </ul>
            
            <div class="explanation">
                <strong>The Nobel Prize (1997):</strong> Myron Scholes and Robert Merton won for developing "a new method to determine the value of derivatives" - both the PDE derivation AND the analytical solution!
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">‚ö†Ô∏è</div>
            <h3>When the Magic Breaks</h3>
            <p>The closed-form solution only works under specific conditions:</p>
            
            <ul>
                <li><strong>European exercise only</strong> (no early exercise allowed)</li>
                <li><strong>Constant volatility</strong> (œÉ is fixed)</li>
                <li><strong>Constant interest rates</strong> (r is fixed)</li>
                <li><strong>No barriers or path dependence</strong></li>
                <li><strong>No dividends</strong> (or constant dividend yield)</li>
            </ul>
            
            <div class="explanation">
                <strong>Reality Check:</strong> Once you relax these assumptions (American options, stochastic volatility, barriers), you lose the analytical solution and must use numerical methods like finite differences, Monte Carlo, or... go back to binomial trees!
            </div>
            
            <p><strong>But the foundation remains:</strong> Even complex models like Heston and SABR build on the Black-Scholes framework - they just require more computational firepower!</p>
        </div>
        
        <div class="step">
            <div class="step-number">‚úì</div>
            <h3>The Journey Complete: Two Principles, Two Methods</h3>
            
            <div class="principles-box">
                <h3>üéØ Summary: The Same Two Principles Throughout</h3>
                
                <p><strong>Binomial Trees (Discrete):</strong></p>
                <ol>
                    <li>Hold Œî shares ‚Üí portfolio value same regardless of up/down</li>
                    <li>Riskless portfolio earns risk-free rate ‚Üí solve for option price</li>
                </ol>
                
                <p><strong>Black-Scholes-Merton (Continuous):</strong></p>
                <ol>
                    <li>Hold Œî = ‚àÇC/‚àÇS shares ‚Üí eliminate random dW<sub>t</sub> term</li>
                    <li>Enforce drift = rC ‚Üí arrive at Black-Scholes PDE</li>
                </ol>
                
                <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin-top: 20px; text-align: center;">
                    <h3 style="color: #ffd700; margin-top: 0;">The Beautiful Unity</h3>
                    <p style="font-size: 1.2em;">Whether you use discrete binomial trees or continuous Black-Scholes, you're applying the SAME fundamental no-arbitrage logic!</p>
                    <p style="font-size: 1.1em; margin-bottom: 0;">As n ‚Üí ‚àû, binomial converges to Black-Scholes. They're not different theories - they're the same theory at different levels of granularity.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
