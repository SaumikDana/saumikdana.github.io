<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>Mathematical Formulation - Inflation Tracking Optimization</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- MathJax CONFIG (must be BEFORE loader) -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
          MathJax.typesetPromise();
        }
      }
    };
  </script>
  <!-- MathJax LOADER -->
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root {
      --grad-a: #667eea;
      --grad-b: #764ba2;
      --ink: #2c3e50;
      --card-bg: #ffffff;
      --muted: #f8f9fa;
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, var(--grad-a) 0%, var(--grad-b) 100%);
      min-height: 100vh;
      color: var(--ink);
    }

    .container {
      max-width: 1500px;
      margin: 0 auto;
      background: var(--card-bg);
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      font-size: 2.8em;
      margin-bottom: 10px;
      background: linear-gradient(135deg, var(--grad-a), var(--grad-b));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 700;
    }

    .subtitle {
      text-align: center;
      font-size: 1.3em;
      opacity: 0.8;
      margin-bottom: 40px;
      font-weight: 300;
    }

    .section {
      margin: 35px 0;
      padding: 30px;
      background: var(--muted);
      border-radius: 12px;
      border-left: 5px solid var(--grad-a);
    }

    .section-title {
      font-size: 1.6em;
      font-weight: 600;
      margin-bottom: 25px;
      color: var(--ink);
    }

    .objective-box {
      background: linear-gradient(135deg, var(--grad-a), var(--grad-b));
      color: white;
      padding: 30px;
      border-radius: 12px;
      margin: 25px 0;
      text-align: center;
      box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
    }

    .objective-title {
      font-size: 1.4em;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .math-block {
      font-size: 1.15em;
      padding: 16px 18px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 8px;
      margin: 12px 0;
      overflow-x: auto;
    }

    .vector-first-section {
      background: linear-gradient(135deg, #ff9a9e, #fecfef);
      border-left: 5px solid #ff6b6b;
      padding: 30px;
      border-radius: 12px;
      margin: 30px 0;
    }

    .step-box {
      background: white;
      padding: 25px;
      border-radius: 10px;
      margin: 20px 0;
      border-left: 4px solid #ff6b6b;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .step-title {
      font-size: 1.2em;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--ink);
    }

    .math-item {
      margin: 12px 0;
      padding: 15px;
      background: var(--muted);
      border-radius: 8px;
      border-left: 3px solid var(--grad-a);
    }

    .constraints-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }

    .constraint-item {
      background: white;
      padding: 20px;
      border-radius: 10px;
      border-left: 4px solid var(--grad-a);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    }

    .constraint-item.disabled {
      opacity: 0.5;
      position: relative;
    }

    .constraint-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--ink);
    }

    .highlight {
      background: linear-gradient(135deg, #ffeaa7, #fab1a0);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      border-left: 5px solid #fdcb6e;
    }

    .arrow {
      text-align: center;
      font-size: 2em;
      margin: 20px 0;
      color: #ff6b6b;
    }

    ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    li {
      margin: 8px 0;
      padding-left: 25px;
      position: relative;
    }

    li:before {
      content: "‚Üí";
      position: absolute;
      left: 0;
      color: var(--grad-a);
      font-weight: bold;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 8px;
      border: 1px solid #dee2e6;
      text-align: left;
    }

    th {
      background: #f8f9fa;
    }

    small { display: inline-block; margin-top: 6px; }

    .tips-highlight {
      background: linear-gradient(135deg, #74b9ff, #0984e3);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      font-weight: 500;
    }

    /* Utility color accents */
    .bg-green { background: #e8f5e8; }
    .bg-yellow { background: #fff3cd; }
    .bg-lilac { background: #dda0dd; color: #fff; }
    .bd-green { border-left-color: #27ae60 !important; }
    .bd-orange { border-left-color: #e17055 !important; }

    /* Enhanced Navigation Styles */
    nav {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 20px;
        padding: 25px 35px;
        margin: 30px 0;
        text-align: center;
        box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        position: relative;
        overflow: hidden;
    }

    nav::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        animation: navShimmer 3s ease-in-out infinite;
    }

    @keyframes navShimmer {
        0%, 100% { left: -100%; }
        50% { left: 100%; }
    }

    nav .tablinks {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        text-decoration: none;
        padding: 15px 35px;
        margin: 0 15px;
        border-radius: 25px;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
    }

    nav .tablinks::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.3));
        border-radius: 25px;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: -1;
    }

    nav .tablinks:hover::before {
        opacity: 1;
    }

    nav .tablinks:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
    }

    nav .tablinks:active {
        transform: translateY(-1px) scale(1.02);
    }    
  </style>
</head>
  <nav>
  <a href="index_rebal.html" class="tablinks">Ops</a>
  </nav>
<body>
  <div class="container">
    <h1>üéØ Mathematical Formulation</h1>

    <!-- Decision Variable -->
    <div class="section">
      <div class="section-title">Decision Variable</div>
      <div class="math-item">
        <strong>Portfolio Weights:</strong> \( w \in \mathbb{R}^n \) = portfolio weights vector
      </div>
    </div>

    <!-- Objective Function -->
    <div class="objective-box">
      <div class="objective-title">Objective Function</div>
      <div class="math-block">
        $$\min \; \tfrac{1}{2}\,\lVert R_{6m} w - r_{6m}^{\mathrm{bench}}\rVert_2^2
        \;+\; \tfrac{1}{2}\,\lVert R_{12m} w - r_{12m}^{\mathrm{bench}}\rVert_2^2
        \;+\; \lambda \sum_{i \in \mathcal{I}} \lvert w_i - w_{\mathrm{prev},i} \rvert$$
      </div>
      <div style="margin-top: 15px; font-size: 0.9em; background: rgba(255, 255, 255, 0.25); padding: 15px; border-radius: 8px;">
        <strong>Where:</strong> ‚Ñê = Intersection set of stocks present in both current and previous universes<br />
        <strong>Turnover penalty applies only to intersection stocks</strong> ‚Äî new stocks and delisted stocks do not contribute to turnover
      </div>
    </div>

    <!-- Roll Forward Logic -->
    <div class="section bd-green" style="background: linear-gradient(135deg,#a8e6cf,#dcedc1);">
      <div class="section-title">üìà Roll Forward Logic for \( w_{\mathrm{prev}} \)</div>

      <div class="step-box">
        <div class="step-title">Step 1: Starting Point (Previous Rebalance Date)</div>
        <div class="math-item">
          <p><strong>Previous rebalance date:</strong> 2024-01-22 ‚Üí Portfolio weights from optimization</p>
          <table>
            <tr style="background: #fff3cd; font-weight: bold;">
              <th>gvkey</th><th>wgt_sol</th>
            </tr>
            <tr><td>001001</td><td>0.40</td></tr>
            <tr><td>001002</td><td>0.35</td></tr>
            <tr><td>001003</td><td>0.25</td></tr>
          </table>
        </div>
      </div>

      <div class="step-box">
        <div class="step-title">Step 2: Performance Between Rebalance Dates</div>
        <div class="math-item bg-green">
          <p><strong>Period:</strong> 2024-01-22 ‚Üí 2024-04-22 (next rebalance date)</p>
          <p><strong>Calculate cumulative growth for each stock:</strong></p>
          <div style="margin: 12px 0;">
            <code>cum_growth = ‚àè(1 + daily_return) over the period</code>
          </div>
          <table>
            <tr style="background: #d4edda; font-weight: bold;">
              <th>gvkey</th><th>Cum Growth</th><th>New Weight</th>
            </tr>
            <tr><td>001001</td><td>1.08</td><td>0.40 √ó 1.08 = 0.432</td></tr>
            <tr><td>001002</td><td>0.95</td><td>0.35 √ó 0.95 = 0.333</td></tr>
            <tr><td>001003</td><td>1.12</td><td>0.25 √ó 1.12 = 0.280</td></tr>
          </table>
        </div>
      </div>

      <div class="step-box">
        <div class="step-title">Step 3: Renormalization</div>
        <div class="math-item bg-yellow">
          <p><strong>Renormalize to sum = 1.0:</strong></p>
          <div>Sum = 0.432 + 0.333 + 0.280 = 1.045</div>
          <div class="arrow">‚Üì</div>
          <table>
            <tr style="background: #f8d7da; font-weight: bold;">
              <th>gvkey</th><th>\( w_{\mathrm{prev}} \) (rolled forward)</th>
            </tr>
            <tr><td>001001</td><td>0.432 / 1.045 = 0.413</td></tr>
            <tr><td>001002</td><td>0.333 / 1.045 = 0.319</td></tr>
            <tr><td>001003</td><td>0.280 / 1.045 = 0.268</td></tr>
          </table>
        </div>
      </div>
    </div>

    <!-- Intersection Logic -->
    <div class="section" style="background: linear-gradient(135deg, #ffeaa7, #fab1a0); border-left: 5px solid #e17055;">
      <div class="section-title">üîó Intersection Logic for Turnover Control</div>

      <div class="step-box">
        <div class="step-title">Current vs Previous Universe Comparison</div>
        <div style="display:flex; gap:20px; margin:20px 0; flex-wrap:wrap;">
          <div style="flex:1; min-width:220px; background:white; border-radius:8px; padding:15px; border:2px solid #e17055;">
            <div style="font-weight:bold; margin-bottom:10px; color:#d63031;">üìä Previous Universe (\( w_{\mathrm{prev}} \))</div>
            <div style="background:#f8d7da; padding:10px; border-radius:4px; margin:5px 0;">001001: 0.413</div>
            <div style="background:#f8d7da; padding:10px; border-radius:4px; margin:5px 0;">001002: 0.319</div>
            <div style="background:#f8d7da; padding:10px; border-radius:4px; margin:5px 0;">001003: 0.268</div>
            <div style="background:#f1f3f4; padding:10px; border-radius:4px; margin:5px 0; opacity:0.6;">001004: 0.000 (delisted)</div>
          </div>

          <div style="flex:1; min-width:220px; background:white; border-radius:8px; padding:15px; border:2px solid #00b894;">
            <div style="font-weight:bold; margin-bottom:10px; color:#00b894;">üéØ Current Universe (\( w \))</div>
            <div style="background:#d1f2eb; padding:10px; border-radius:4px; margin:5px 0;">001001: \( w_1 \) (solving for)</div>
            <div style="background:#d1f2eb; padding:10px; border-radius:4px; margin:5px 0;">001002: \( w_2 \) (solving for)</div>
            <div style="background:#f1f3f4; padding:10px; border-radius:4px; margin:5px 0; opacity:0.6;">001003: (filtered out)</div>
            <div style="background:#d1f2eb; padding:10px; border-radius:4px; margin:5px 0;">001005: \( w_3 \) (new stock)</div>
          </div>
        </div>

        <div style="text-align:center; font-size:1.5em; margin:20px 0; color:#fdcb6e;">‚¨áÔ∏è Intersection Calculation</div>

        <div class="math-item" style="text-align:center; background:#dda0dd; color:#fff;">
          <div style="font-size:1.1em; font-weight:bold; margin-bottom:10px;">üìç Intersection Set \( \mathcal{I} = \{001001,\,001002\} \)</div>
          <div>Only these stocks appear in BOTH current and previous universes</div>
          <div>Turnover penalty and constraint apply ONLY to intersection stocks</div>
        </div>
      </div>
    </div>

    <!-- Vector-First Construction -->
    <div class="vector-first-section">
      <div class="section-title">üìä Matrix and Vector Construction (Vector-First Approach)</div>

      <!-- Step 1: Raw Input Data -->
      <div class="step-box">
        <div class="step-title">Step 1: Raw Input Data</div>
        <div style="display:flex; gap:20px; margin:20px 0; flex-wrap:wrap;">
          <div style="flex:1; min-width:260px; background:white; border-radius:8px; padding:15px; border:1px solid #e9ecef; box-shadow:0 2px 4px rgba(0,0,0,0.06);">
            <div style="font-weight:bold; margin-bottom:10px;">üìà data_bench (TIPS yields)</div>
            <table style="font-size:0.9em;">
              <tr><th>Date</th><th>T10YIE</th></tr>
              <tr><td>2024-01-01</td><td>0.0234</td></tr>
              <tr><td>2024-01-02</td><td>0.0241</td></tr>
              <tr><td>...</td><td>...</td></tr>
              <tr style="background:#e3f2fd;"><td>2024-01-08</td><td>0.0237</td></tr>
              <tr style="background:#e3f2fd;"><td>2024-01-09</td><td>0.0245</td></tr>
            </table>
            <small>üìÖ 126/252 trading days needed for lookback</small>
          </div>

          <div style="flex:1; min-width:260px; background:white; border-radius:8px; padding:15px; border:1px solid #e9ecef; box-shadow:0 2px 4px rgba(0,0,0,0.06);">
            <div style="font-weight:bold; margin-bottom:10px;">üìä data_tr (Stock returns)</div>
            <table style="font-size:0.9em;">
              <tr><th>Date</th><th>gvkey</th><th>tr</th></tr>
              <tr><td>2024-01-08</td><td>001001</td><td>0.015</td></tr>
              <tr><td>2024-01-08</td><td>001002</td><td>0.009</td></tr>
              <tr><td>2024-01-08</td><td>001003</td><td>0.021</td></tr>
            </table>
            <small>üîç Thousands of rows, filtered by baseline</small>
          </div>

          <div style="flex:1; min-width:220px; background:white; border-radius:8px; padding:15px; border:1px solid #e9ecef; box-shadow:0 2px 4px rgba(0,0,0,0.06);">
            <div style="font-weight:bold; margin-bottom:10px;">üéØ baseline (Universe filter)</div>
            <table style="font-size:0.9em;">
              <tr><th>gvkey</th><th>wgt</th></tr>
              <tr><td>001001</td><td>0.40</td></tr>
              <tr><td>001002</td><td>0.35</td></tr>
              <tr><td>001003</td><td>0.25</td></tr>
            </table>
            <small>‚ö° Only selected stocks from data_tr</small>
          </div>
        </div>
      </div>

      <!-- Step 2: Build Benchmark Vector FIRST -->
      <div class="step-box">
        <div class="step-title">Step 2: Build Benchmark Vector FIRST (Establishes Master Calendar)</div>
        <div class="math-item" style="background:#f0f8ff; border:2px solid #3498db;">
          <h4>üéØ TIPS Yield Vector Construction</h4>
          <div class="tips-highlight">
            üèõÔ∏è <strong>TIPS Benchmark:</strong> Treasury Inflation-Protected Securities (10-Year Breakeven Inflation Rate)
          </div>
          <p><strong>Input:</strong> data_bench, rebal_date=2024-01-22, lookback_days=126</p>

          <div style="margin: 16px 0;">
            <code>lookback_dates = last 126 trading days before 2024-01-22</code>
            <div style="text-align:center; font-size:1.5em; color:#f39c12; margin:10px 0;">‚Üì</div>
            <table>
              <tr style="background:#fff3cd; font-weight:bold;">
                <th>Index</th><th>Date</th><th>TIPS Yield</th>
              </tr>
              <tr><td>[0]</td><td>2024-01-08</td><td>0.0237</td></tr>
              <tr><td>[1]</td><td>2024-01-09</td><td>0.0245</td></tr>
              <tr><td>[2]</td><td>2024-01-10</td><td>0.0239</td></tr>
              <tr><td>...</td><td>...</td><td>...</td></tr>
              <tr><td>[125]</td><td>2024-01-22</td><td>0.0241</td></tr>
            </table>
          </div>

          <p><strong>‚ú® Output:</strong></p>
          <ul>
            <li>\( r_{6m}^{\mathrm{bench}} \in \mathbb{R}^{126} \) = Last 126 trading days of TIPS yields before rebalance date</li>
            <li>\( r_{12m}^{\mathrm{bench}} \in \mathbb{R}^{252} \) = Last 252 trading days of TIPS yields before rebalance date</li>
          </ul>
        </div>
      </div>

      <!-- Step 3: Build Stock Matrix Using Same Dates -->
      <div class="step-box">
        <div class="step-title">Step 3: Build Stock Matrix Using Same Dates (Forced Alignment)</div>
        <div class="math-item" style="background:#fef9e7; border:2px solid #f39c12;">
          <h4>üìä Stock Return Matrix Construction</h4>
          <p><strong>Input:</strong> data_tr, baseline, required_dates (from TIPS vector!)</p>

          <div style="margin: 16px 0;">
            <p><strong>1. Filter universe:</strong> baseline selects only 3 stocks from available data_tr</p>
            <p><strong>2. Initialize matrix:</strong> (126 dates √ó 3 stocks) filled with zeros</p>
            <p><strong>3. Fill column by column using EXACT same dates as TIPS vector:</strong></p>

            <table>
              <tr style="background:#fff3cd; font-weight:bold;">
                <th>Date</th><th>001001 (Stock A)</th><th>001002 (Stock B)</th><th>001003 (Stock C)</th>
              </tr>
              <tr><td>2024-01-08</td><td>0.015</td><td>0.009</td><td>0.021</td></tr>
              <tr><td>2024-01-09</td><td>-0.012</td><td>0.018</td><td>0.005</td></tr>
              <tr><td>2024-01-10</td><td>0.008</td><td>-0.003</td><td>0.000</td></tr>
              <tr><td>...</td><td>...</td><td>...</td><td>...</td></tr>
              <tr><td>2024-01-22</td><td>0.006</td><td>0.016</td><td>0.012</td></tr>
            </table>
          </div>

          <ul>
            <li>\( R_{6m} \in \mathbb{R}^{126 \times n} \) = Stock returns matrix using exact same 126 dates as benchmark vector</li>
            <li>\( R_{12m} \in \mathbb{R}^{252 \times n} \) = Stock returns matrix using exact same 252 dates as benchmark vector</li>
            <li>Missing stock data on any date ‚Üí filled with zeros</li>
            <li>Only stocks in baseline universe included (filtered from larger data_tr)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Constraints (FIXED: uses proper display math) -->
    <div class="section">
      <div class="section-title">Constraints</div>
      <div class="constraints-grid">
        <div class="constraint-item">
          <div class="constraint-title">1. Fully Invested</div>
          <div class="math-block">$$\sum_{i=1}^{n} w_i = 1$$</div>
        </div>

        <div class="constraint-item">
          <div class="constraint-title">2. Long-Only</div>
          <div class="math-block">$$w_i \ge w_{\min} \quad \forall i$$</div>
        </div>

        <div class="constraint-item">
          <div class="constraint-title">3. Position Limits</div>
          <div class="math-block">$$w_i \le w_{\max} \quad \forall i$$</div>
        </div>

        <div class="constraint-item disabled">
          <div class="constraint-title">4. Baseline Multiplier Bounds</div>
          <div class="math-block">
            $$\ell_i \, w_i^{\mathrm{base}} \le w_i \le u_i \, w_i^{\mathrm{base}} \quad \forall i$$
          </div>
          <small style="color:#dc3545; font-weight:bold;">(DISABLED: multiplier_bounds = None)</small>
        </div>

        <div class="constraint-item disabled">
          <div class="constraint-title">5. Portfolio Beta Constraints</div>
          <div class="math-block">
            $$\beta_L \le \sum_{i=1}^{n} \beta_i\, w_i \le \beta_U$$
          </div>
          <small style="color:#dc3545; font-weight:bold;">(DISABLED: beta_bounds = None)</small>
        </div>

        <div class="constraint-item disabled">
          <div class="constraint-title">6. Sector Allocation</div>
          <div class="math-block">
            $$\left|\sum_{i \in S} w_i - \theta_S\right| \le \delta\,\theta_S \quad \forall \text{ sectors } S$$
          </div>
          <small style="color:#dc3545; font-weight:bold;">(DISABLED: sect_max_diff = None)</small>
        </div>

        <div class="constraint-item bd-orange">
          <div class="constraint-title">7. Turnover Constraint (Intersection Only)</div>
          <div class="math-block">
            $$\sum_{i \in \mathcal{I}} \left|\,w_i - w_{\mathrm{prev},i}\,\right| \le T_{\mathrm{cap}}$$
          </div>
          <div style="margin-top:10px; font-size:0.9em; background:#fff3cd; padding:8px; border-radius:4px;">
            <strong>Where:</strong> ‚Ñê = Intersection of current and previous stock universes<br />
            <strong>Example:</strong> \( |w_1 - 0.413| + |w_2 - 0.319| \le 0.05 \)
          </div>
        </div>
      </div>
    </div>

    <!-- Performance Results Section -->
    <div class="section" style="background: linear-gradient(135deg, #e8f5e8, #c8e6c9); border-left: 5px solid #4caf50;">
      <div class="section-title">üìä Strategy Performance Results</div>
      
      <div class="step-box">
        <div class="step-title">Rolling Portfolio Metrics Dashboard</div>
        <div style="text-align: center; margin: 20px 0;">
          <img src="performance_dashboard.png" alt="Performance Dashboard showing Rolling Beta, Tracking Error, and Turnover metrics" 
               style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.15);" />
        </div>
        
        <div class="math-item" style="background: #f1f8e9; border-left: 3px solid #689f38;">
          <h4>Key Performance Insights:</h4>
          <ul>
            <li><strong>Rolling Beta Analysis:</strong> Strategy maintains variable inflation beta, with notable spikes during crisis periods (2008-2009, 2020). The 252-day beta provides more stable long-term exposure while 126-day beta captures short-term regime shifts.</li>
            <li><strong>Tracking Error Control:</strong> Annualized tracking error ranges from 5-40%, demonstrating effective inflation tracking. Higher volatility during market stress periods is expected for this type of strategy.</li>
            <li><strong>Turnover Management:</strong> Excellent adherence to 5% turnover cap across most periods, with one notable exception around 2013 (~11%) likely due to significant inflation regime change.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Solution Method -->
    <div class="section">
      <div class="section-title">Solution Method</div>
      <div class="math-item">
        <strong>Convex Quadratic Programming (QP):</strong>
        <ul>
          <li>Solver: ECOS (primary), OSQP, SCS, CLARABEL (fallback)</li>
          <li>Tolerance: <code>feastol = 1e-3</code>, <code>abstol = 1e-3</code>, <code>reltol = 1e-3</code></li>
          <li>Max iterations: 100,000</li>
          <li>Warm start: Disabled for stability</li>
        </ul>
      </div>
    </div>

<!-- Performance Results Section -->
    <div class="section" style="background: linear-gradient(135deg, #e8f5e8, #c8e6c9); border-left: 5px solid #4caf50;">
      <div class="section-title">üìä Strategy Performance Results</div>
      
      <div class="step-box">
        <div class="step-title">Rolling Portfolio Metrics Dashboard</div>
        <div style="text-align: center; margin: 20px 0;">
          <img src="performance_dashboard.png" alt="Performance Dashboard showing Rolling Beta, Tracking Error, and Turnover metrics" 
               style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.15);" />
        </div>
        
        <div class="math-item" style="background: #f1f8e9; border-left: 3px solid #689f38;">
          <h4>Key Performance Insights:</h4>
          <ul>
            <li><strong>Rolling Beta Analysis:</strong> Strategy maintains variable inflation beta, with notable spikes during crisis periods (2008-2009, 2020). The 252-day beta provides more stable long-term exposure while 126-day beta captures short-term regime shifts.</li>
            <li><strong>Tracking Error Control:</strong> Annualized tracking error ranges from 5-40%, demonstrating effective inflation tracking. Higher volatility during market stress periods is expected for this type of strategy.</li>
            <li><strong>Turnover Management:</strong> Excellent adherence to 5% turnover cap across most periods, with one notable exception around 2013 (~11%) likely due to significant inflation regime change.</li>
          </ul>
        </div>
      </div>

      <div class="step-box">
        <div class="step-title">Sector Evolution Analysis</div>
        <div style="text-align: center; margin: 20px 0;">
          <img src="sector_evolution.png" alt="Sector Weight Evolution showing dynamic allocation across GICS sectors over time" 
               style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 8px 16px rgba(0,0,0,0.15);" />
        </div>
        
        <div class="math-item" style="background: #fff3e0; border-left: 3px solid #ff9800;">
          <h4>Sector Allocation Strategy:</h4>
          <ul>
            <li><strong>Consumer Staples Dominance (30):</strong> Consistently largest allocation (15-35%), reflecting defensive positioning and pricing power during inflationary periods. Peak allocation during 2009-2011 crisis demonstrates flight-to-quality behavior.</li>
            <li><strong>Energy Sector Cyclicality (10):</strong> Highly variable allocation (0-12%) driven by oil-inflation correlation. Zero weights during certain periods suggest complex energy-inflation dynamics requiring careful timing.</li>
            <li><strong>Technology Sector Decline (45):</strong> Reduced allocation over time from ~27% to ~10%, reflecting growth stock vulnerability to inflation and rising rates. Strategy correctly identifies tech's inflation sensitivity.</li>
            <li><strong>Defensive Sector Focus:</strong> Utilities (55), Health Care (35), and Real Estate (60) maintain steady allocations, providing inflation hedging through regulated pricing mechanisms and essential service characteristics.</li>
            <li><strong>Industrial Sector Growth (20):</strong> Increasing allocation over time, likely capturing infrastructure benefits and commodity exposure that correlate with inflation expectations.</li>
            <li><strong>Financial Sector Volatility (40):</strong> Moderate but variable allocation reflecting complex relationship between inflation, interest rates, and financial sector performance.</li>
          </ul>
        </div>

        <div class="highlight">
          <h4>üéØ Strategic Insights from Sector Evolution</h4>
          <p>The sector allocation patterns reveal a sophisticated understanding of inflation hedging:</p>
          <ul>
            <li><strong>Defensive Tilt:</strong> Heavy weighting toward sectors with pricing power and essential products/services</li>
            <li><strong>Growth Stock Avoidance:</strong> Systematic reduction in growth-sensitive sectors vulnerable to rising rates</li>
            <li><strong>Regime Awareness:</strong> Dynamic allocation adjusts to changing inflation environments and market cycles</li>
            <li><strong>Quality Focus:</strong> Concentration in established sectors with predictable cash flows and inflation pass-through ability</li>
          </ul>
        </div>
      </div>
    </div>

    
    <!-- Risk Management -->
    <div class="section">
      <div class="section-title">Risk Management Framework</div>

      <div class="constraints-grid">
        <div class="constraint-item" style="border-left-color:#28a745;">
          <div class="constraint-title">Position Risk Controls</div>
          <ul>
            <li>Min weight: \(1\times 10^{-5}\) (effectively zero)</li>
            <li>Max weight: 7% (concentration limit)</li>
          </ul>
        </div>

        <div class="constraint-item" style="border-left-color:#ffc107;">
          <div class="constraint-title">Quality Filters</div>
          <ul>
            <li>GRR (Geographic Risk Rating) ‚â• 1.5</li>
            <li>Quarterly rebalancing (Jan, Apr, Jul, Oct)</li>
            <li>Last trading day of each quarter</li>
          </ul>
        </div>

        <div class="constraint-item" style="border-left-color:#dc3545;">
          <div class="constraint-title">Transaction Cost Management</div>
          <ul>
            <li>Turnover penalty: \( \lambda = 10^{-4} \)</li>
            <li>L1 norm penalty on weight changes</li>
          </ul>
        </div>

        <div class="constraint-item" style="border-left-color:#6f42c1;">
          <div class="constraint-title">Data Integrity</div>
          <ul>
            <li>Missing data ‚Üí zero fill</li>
            <li>Negative weights ‚Üí clamp to zero</li>
            <li>Weight sum validation (= 1.0)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div style="text-align:center; margin-top:40px; padding:20px; background: linear-gradient(135deg, var(--grad-a), var(--grad-b)); color:white; border-radius:12px;">
      <h3 style="margin-bottom:10px;">üéØ Inflation-Tracking Portfolio Optimization</h3>
      <p style="margin:0; opacity:0.9;">A sophisticated quantitative strategy for hedging inflation risk through equity portfolio construction</p>
    </div>
  </div>
</body>
</html>
